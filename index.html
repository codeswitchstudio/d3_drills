<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SVG with Raw Javascript</title>
  </head>

  <body>
    <div id="content">
      <h2>SVG with Raw Javascript</h2>
    </div>

    <script>
      const xmlns = "http://www.w3.org/2000/svg"
      const stage_w = 100
      const stage_h = 100

      // Create SVG container element in the SVG name space
      const stage = document.createElementNS(xmlns, "svg")

      // Container size

      stage.setAttributeNS(null, "viewBox", "0 0 " + stage_w + " " + stage_h) // NameSpace
      stage.setAttributeNS(null, "width", stage_w)
      stage.setAttributeNS(null, "height", stage_h)

      // Add the SVG to the page

      document.body.appendChild(stage)

      // Create a rectangle element in SVG namespace
      var circle = document.createElementNS(xmlns, "circle")

      // Set the X, Y position, width, height, fill
      circle.setAttributeNS(null, "cx", "20")
      circle.setAttributeNS(null, "cy", "40")
      circle.setAttributeNS(null, "r", "20")
      // rect.setAttributeNS(null, "height", "40")
      circle.setAttributeNS(null, "fill", "yellow")

      // Add rectangle to stage
      stage.appendChild(circle)
    </script>
    <div id="content">
      <h2>SVG with d3</h2>
    </div>

    <script type="module">
      import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm"
      // svg with d3

      const new_stage = d3.select("body").append("svg")

      new_stage
        .attr("viewBox", "0, 0 " + stage_w + " " + stage_h)
        .attr("width", stage_w)
        .attr("height", stage_h)

      const new_rect = new_stage.append("rect")

      new_rect
        .attr("height", 40)
        .attr("width", 80)
        .attr("x", 0)
        .attr("y", 20)
        .attr("fill", "pink")

      stage_w = stage_w * 5
      const my_data = [1, 2, 3, 4, 5, 6]

      const another_stage = d3.select("body").append("svg")

      another_stage
        .attr("viewBox", "0, 0 " + stage_w + " " + stage_h)
        .attr("width", stage_w)
        .attr("height", stage_h)

      const squares = another_stage
        .selectAll("rect")
        .data(my_data)
        .enter()
        .append("rect")

      squares
        .attr("fill", "maroon")
        .attr("x", function (d) {
          return Math.pow(2, d) * 5
        })
        .attr("y", stage_h / 2)
        .attr("height", function (d) {
          return Math.pow(2, d)
        })
        .attr("width", function (d) {
          return Math.pow(2, d)
        })
    </script>
  </body>
</html>
